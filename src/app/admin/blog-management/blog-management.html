<div class="p-4 space-y-4 mt-30">
  <h2 class="text-2xl font-bold">Blog Management</h2>

  <button
    (click)="showAddForm()"
    class="px-4 py-2 bg-green-500 text-white rounded"
    *ngIf="!isFormVisible"
  >
    Add Blog
  </button>

  <div *ngIf="isFormVisible" class="space-y-4 border p-4 rounded-lg shadow">
    <h3 class="text-lg font-semibold">
      {{ isEditMode ? 'Edit Blog' : 'Add Blog' }}
    </h3>

    <input
      type="text"
      [(ngModel)]="title"
      placeholder="Title"
      class="w-full border px-3 py-2"
    />
    <input
      type="text"
      [(ngModel)]="category"
      placeholder="Category"
      class="w-full border px-3 py-2"
    />
    <input
      type="text"
      [(ngModel)]="author"
      placeholder="Author"
      class="w-full border px-3 py-2"
    />
    <textarea
      [(ngModel)]="content"
      placeholder="Content"
      class="w-full border px-3 py-2"
    ></textarea>

    <div *ngIf="existingImage">
      <p>Current Image:</p>
      <img
        [src]="serverUrl + '/uploads/' + existingImage"
        alt="Blog Image"
        class="w-48 h-32 object-cover"
      />
    </div>

    <input type="file" (change)="onFileSelected($event)" class="w-full" />

    <div class="flex gap-2 mt-4">
      <button
        (click)="saveBlog()"
        class="px-4 py-2 bg-blue-500 text-white rounded"
      >
        {{ isEditMode ? 'Update Blog' : 'Add Blog' }}
      </button>
      <button
        (click)="isFormVisible = false"
        class="px-4 py-2 bg-gray-400 text-white rounded"
      >
        Cancel
      </button>
    </div>
  </div>

  <div *ngIf="!isFormVisible">
    <h3 class="text-lg font-semibold mt-6">Blog List</h3>
    <div
      *ngFor="let blog of blogs"
      class="border p-4 rounded-lg shadow space-y-2 mt-2"
    >
      <h4 class="font-semibold">{{ blog.title }}</h4>
      <p class="text-sm text-gray-500">
        {{ blog.date }} | {{ blog.category }} | By {{ blog.author }}
      </p>
      <div *ngIf="blog.image">
        <img
          [src]="serverUrl + '/uploads/' + blog.image"
          alt="Blog Image"
          class="w-48 h-32 object-cover"
        />
      </div>
      <p class="text-sm">{{ blog.content | slice:0:100 }}...</p>

      <div class="flex gap-2 mt-2">
        <button
          (click)="editBlog(blog)"
          class="px-3 py-1 bg-blue-500 text-white rounded"
        >
          Edit
        </button>
        <button
          (click)="deleteBlog(blog._id)"
          class="px-3 py-1 bg-red-500 text-white rounded"
        >
          Delete
        </button>
      </div>
    </div>
  </div>
</div>
